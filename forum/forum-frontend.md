# **前端需求文档（Vue3）**

## **1. 概述**

### 1.1 文档目标

本文档用于指导数码游戏论坛前端开发（Vue3），明确功能模块、技术选型、交互逻辑及与后端接口的对接规范。

### 1.2 适用范围

- 前端开发人员（主责页面渲染、用户交互、数据请求）；
- 测试人员（验证功能完整性、兼容性）；
- 产品经理（确认需求落地）。

## **2. 技术选型**

|      技术/工具       | 版本  |   功能描述   |                             作用                             |
| :------------------: | :---: | :----------: | :----------------------------------------------------------: |
|         Vue3         | 3.4+  |   核心框架   |      构建单页应用（SPA），支持组合式API提升代码复用性。      |
|         Vite         | 5.0+  |   构建工具   |       快速打包编译，支持HMR（热更新），提升开发效率。        |
|        Pinia         | 2.1+  |   状态管理   | 集中管理用户登录状态、帖子列表、收藏夹等全局数据，替代Vuex。 |
|      Vue Router      | 4.3+  |   路由管理   | 控制页面跳转逻辑（如从“游戏分区”跳转到“数码评测”），支持路由懒加载。 |
|     Element Plus     | 2.4+  |   UI组件库   | 提供表单（登录/注册）、按钮、卡片等标准化组件，降低前端开发成本。 |
| vue-virtual-scroller | 0.24+ | 无限滚动插件 | 实现帖子列表“滚动加载更多”，优化长列表性能（仅渲染可见区域）。 |
|       TinyMCE        | 6.9+  | 富文本编辑器 | 支持图片/视频上传（本地→OSS）、代码块高亮（如Python/C++）、表情包插入。 |
|   Socket.IO客户端    | 4.7+  |   实时通信   |  监听消息通知（私信/评论回复），实现“未读消息数”实时更新。   |
|        Axios         | 1.5+  |  HTTP请求库  | 封装后端API调用（如获取帖子列表、提交评论），支持请求拦截（添加Token）。 |
|   vue-router-cache   | 0.6+  |   路由缓存   | 缓存高频访问页面（如个人中心），减少重复渲染，提升响应速度。 |

## **3. 核心功能模块**

### 3.1 用户体系

#### 3.1.1 登录/注册

- **流程**：
  1. 用户进入登录页→选择“邮箱登录”或“注册”；
  2. 注册时填写邮箱、昵称、选择“新手/资深”标签（默认新手）→发送6位验证码至邮箱→验证通过后创建账号；
  3. 登录时支持“密码登录”或“验证码登录”（防暴力破解）；
  4. 新手引导：首次登录后弹出浮层，引导用户完善头像/简介、选择兴趣分区（游戏/数码/比赛）。
- **接口依赖**：
  - `POST /api/v1/auth/register`：注册（需邮箱、昵称、验证码、兴趣标签）；
  - `POST /api/v1/auth/login`：登录（返回JWT Token）；
  - `GET /api/v1/users/me`：获取当前用户信息（需Token）。

#### 3.1.2 权限分级

|   角色   |                           功能权限                           |
| :------: | :----------------------------------------------------------: |
| 普通用户 | 发帖/评论/收藏/关注、申请成为“资深用户”（发帖数≥50且无违规记录自动升级）； |
| 资深用户 | 帖子“加精”推荐权（标记优质内容）、@用户提醒优先触达（消息通知置顶）； |
|  管理员  | 审核帖子/评论、封禁违规用户、发布公告（如“本周热门游戏讨论专区”）。 |

### 3.2 内容浏览与推荐

#### 3.2.1 分区结构

- **一级分类**：游戏（主机/PC/手游）、数码（硬件/软件/周边）、比赛（电竞赛事/游戏内赛）；
- **二级子类**（示例）：
  - 游戏→主机→PS5；游戏→PC→3A大作；数码→硬件→显卡；比赛→《原神》全球赛。

#### 3.2.2 帖子列表

- **交互逻辑**：
  - 无限滚动：滚动至页面底部自动加载下一页（每页20条），首屏加载前10条（预加载）；
  - 排序规则：默认“推荐”（基于用户兴趣算法），可选“最新”“热门（点赞+评论数）”“精华”；
  - 推荐算法（后端提供接口）：根据用户浏览历史、收藏标签计算兴趣权重，返回匹配帖子。
- **接口依赖**：
  - `GET /api/v1/posts/`：获取帖子列表（参数：分类、排序方式、分页）；
  - `GET /api/v1/posts/recommended`：获取推荐帖子（基于用户兴趣，需Token）。

### 3.3 内容生产与互动

#### 3.3.1 富文本编辑

- **功能要求**：
  - 支持图片/视频上传（本地→OSS，需集成阿里云OSS SDK）；
  - 代码块高亮（自动识别Python/C++等游戏常用语言）；
  - 表情包插入（预设游戏相关表情库，如“666”“裂开”）；
  - 限制：单帖最大2MB（图片≤500KB/张），禁止外链非信任网站（防广告）。
- **接口依赖**：
  - `POST /api/v1/posts/`：发布帖子（需Token，返回帖子ID）；
  - `POST /api/v1/posts/{post_id}/images/`：上传图片（返回图片URL）。

#### 3.3.2 评论系统

- **交互逻辑**：
  - 嵌套回复：支持1层嵌套（即“楼中楼”），显示回复上下文（如：“@用户A 你提到的XX问题，我补充下→”）；
  - @提醒：输入“@”时自动联想用户列表（匹配昵称/用户名），选中后高亮显示并发送实时通知；
  - 互动功能：点赞（防刷：同一用户24小时内仅能点赞1次）、举报（分类：广告/辱骂/剧透，管理员优先处理）。
- **接口依赖**：
  - `POST /api/v1/comments/`：发表评论（需Token，关联帖子/父评论）；
  - `POST /api/v1/comments/{comment_id}/like`：点赞评论（需Token）；
  - `GET /api/v1/comments/{post_id}`：获取帖子评论列表（含嵌套回复）。

### 3.4 个人中心

#### 3.4.1 核心功能

|   功能模块   |                           交互描述                           |
| :----------: | :----------------------------------------------------------: |
| 个人信息编辑 | 上传头像（5MB以内，自动压缩）、修改昵称/简介（限制200字）。  |
|   发帖记录   |    按时间线展示已发布帖子（筛选：待审核/已发布/已删除）。    |
|    收藏夹    | 分类管理收藏的帖子（如“PS5攻略”“数码新品”），支持取消收藏。  |
|   关注列表   | 关注的用户（动态更新其发帖）、关注的话题（如“RTX 4090显卡”）。 |
|   消息通知   | 未读消息红点提醒（私信/评论回复/系统通知），点击进入详情页（支持标记已读）。 |

## **4. 性能与体验优化**

### 4.1 页面预加载

- 进入首页时预加载“推荐分区”的前5条帖子数据（通过`axios`并发请求）；
- 切换分区时缓存已加载的分区数据（如“游戏→PS5”首次加载后，再次访问直接读取缓存）。

### 4.2 离线缓存

- 使用Service Worker + Cache API缓存静态资源（JS/CSS/图片），支持弱网环境下访问最近浏览的帖子；
- 缓存策略：LRU（最近最少使用），限制缓存大小为500MB。

## **5. 非功能需求**

### 5.1 兼容性

- 支持主流浏览器：Chrome（≥100）、Firefox（≥95）、Edge（≥100）、Safari（≥15）；
- 移动端适配：响应式布局（基于Flexbox），H5页面在手机端显示正常（字体≥14px，按钮≥48px×48px）。

### 5.2 可维护性

- 代码规范：ESLint（规则：Airbnb）+ Prettier（统一格式）；
- 组件化：按功能拆分组件（如`PostList.vue`、`CommentSection.vue`），复用率≥70%；
- 日志监控：集成Sentry，捕获前端异常（如接口请求失败、组件渲染错误）。